(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{120:function(e,t,a){e.exports=a(209)},127:function(e,t,a){},128:function(e,t,a){},130:function(e,t,a){},137:function(e,t,a){},141:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(113),l=a.n(s),r=(a(127),a(128),a(129),a(217)),i=(a(130),a(214)),c=a(215),m=a(114),d=a(218),h=a(115),u=a(37),p=a(31),E=a(48);const g=new E.a;function b(){const e=(new Date).getTime();return new Date(e+18e5)}function C(){return!Object(p.isUndefined)(g.get("_s"))&&g.get("_s")}function f(){const e=C();return e||(window.location.href="/login"),g.set("_s",e,{path:"/",expires:b()}),e}const x=function(e){let t=f();return r.a.get("".concat(u.APIHOST).concat(e),{headers:{Authorization:"Bearer ".concat(t)}})},w=function(e,t){let a=f();return r.a.post("".concat(u.APIHOST).concat(e),t,{headers:{Authorization:"Bearer ".concat(a)}})},S=function(e,t){let a=f();return r.a.put("".concat(u.APIHOST).concat(e),t,{headers:{Authorization:"Bearer ".concat(a)}})},v=function(e){let t=f();return r.a.delete("".concat(u.APIHOST).concat(e),{headers:{Authorization:"Bearer ".concat(t)}})};var B=a(213);a(137);class I extends o.a.Component{constructor(e){super(e),this.state={loading:!1}}componentDidUpdate(e){e.show!==this.props.show&&this.setState({show:this.props.show})}render(){return o.a.createElement(o.a.Fragment,null,this.state.show?o.a.createElement("div",{id:"loading-backdrop"},o.a.createElement(B.a,{animation:"border",variant:"primary"})):null)}}const T=new E.a;class k extends o.a.Component{constructor(e){super(e),this.state={loading:!1,usuario:"",pass:""}}iniciarSesion(){this.setState({loading:!0}),r.a.post("".concat(u.APIHOST,"/usuarios/login"),{usuario:this.state.usuario,pass:this.state.pass}).then(e=>{null==e.data.token?alert("Usuario y contrase\xf1a inv\xe1lidos"):(T.set("_s",e.data.token,{path:"/",expires:b()}),this.props.history.push("/empleados")),this.setState({loading:!1})}).catch(e=>{console.log(e),this.setState({loading:!1})})}render(){return o.a.createElement(i.a,{id:"login-container"},o.a.createElement(I,{show:this.state.loading}),o.a.createElement(c.a,null,o.a.createElement(m.a,null,o.a.createElement(c.a,null,o.a.createElement("h2",null,"Iniciar Sesi\xf3n")),o.a.createElement(c.a,null,o.a.createElement(m.a,{sm:"12",xs:"12",md:{span:4,offset:4},lg:{span:4,offset:4},xl:{span:4,offset:4}},o.a.createElement(d.a,null,o.a.createElement(d.a.Group,null,o.a.createElement(d.a.Label,null,"Usuario"),o.a.createElement(d.a.Control,{onChange:e=>this.setState({usuario:e.target.value})})),o.a.createElement(d.a.Group,null,o.a.createElement(d.a.Label,null,"Contrase\xf1a"),o.a.createElement(d.a.Control,{type:"password",onChange:e=>this.setState({pass:e.target.value})})),o.a.createElement(h.a,{variant:"primary",onClick:()=>{this.iniciarSesion()}},"Iniciar sesi\xf3n")))))))}}a(141);var D=a(219),P=a(220),_=a(216),L=a(117),y=a(63),N=a(46);const F=new E.a;class G extends o.a.Component{constructor(e){super(e),this.state={}}logout(){F.remove("_s"),window.location.reload()}render(){return o.a.createElement(D.a,{fixed:"top",id:"navbar",expand:"lg",variant:"dark",bg:"primary"},o.a.createElement(i.a,null,o.a.createElement(D.a.Brand,{href:"#home"},"Gestor Empleados ",o.a.createElement("span",{id:"usuario-sub-branm"})),o.a.createElement(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(D.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(P.a,{className:"me-auto"}),o.a.createElement(_.a,{id:"dropdown-basic-button",title:"Usuario"},o.a.createElement(L.a.Header,{id:"dropdown-header"},o.a.createElement(c.a,null,o.a.createElement(y.a,{icon:N.c})),o.a.createElement(c.a,null,"#USUARIO#")),o.a.createElement(L.a.Divider,null),o.a.createElement(L.a.Item,{onClick:()=>this.logout()},"Cerrar sesi\xf3n")))))}}var M=a(95),O=a(12);class V extends o.a.Component{constructor(e){super(e),this.state={auth:!1}}componentWillMount(){this.setState({auth:!!C()&&!this.state.auth})}render(){const{component:e,...t}=this.props;return o.a.createElement(O.b,Object.assign({},t,{render:t=>this.state.auth?o.a.createElement(e,t):o.a.createElement(O.a,{to:{pathname:"/login",state:{from:this.props.location}}})}))}}var A=a(94),U=a.n(A),H=a(52),j=a.n(H),z=a(79),J=a.n(z);const{SearchBar:K}=z.Search;class R extends o.a.Component{constructor(e){super(e),this.state={Loading:!1,rows:[]},this.props.showEditButton&&!this.existColumn("Editar")&&this.props.columns.push(this.gerEditButton()),this.props.showDeleteButton&&!this.existColumn("Eliminar")&&this.props.columns.push(this.getDeleteButton())}componentDidMount(){this.getData()}getData(){this.setState({loading:!0}),x(this.props.url).then(e=>{this.setState({rows:e.data,loading:!1})}).catch(e=>{this.setState({loading:!0}),console.error(e)})}existColumn(e){let t=this.props.columns.find(t=>t.text===e);return!Object(p.isUndefined)(t)}gerEditButton(){return{text:"Editar",formatter:(e,t)=>o.a.createElement(h.a,{onClick:()=>this.props.onClickEditButton(t)},o.a.createElement(y.a,{icon:N.a}))}}getDeleteButton(){return{text:"Eliminar",formatter:(e,t)=>o.a.createElement(h.a,{onClick:()=>this.props.onClickDeleteButton(t)},o.a.createElement(y.a,{icon:N.b}))}}render(){const e={custom:!0,totalSize:this.state.rows.length};return o.a.createElement(o.a.Fragment,null,o.a.createElement(I,{show:this.state.loading}),o.a.createElement(J.a,{keyField:"tp",data:this.state.rows,columns:this.props.columns,search:!0},t=>o.a.createElement(o.a.Fragment,null,o.a.createElement(H.PaginationProvider,{pagination:j()(e)},e=>{let{paginationProps:a,paginationTableProps:n}=e;return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,null,o.a.createElement(m.a,null,o.a.createElement(H.SizePerPageDropdownStandalone,a)),o.a.createElement(m.a,null,o.a.createElement(K,t.searchProps))),o.a.createElement(U.a,Object.assign({keyField:"bt",data:this.state.rows,columns:this.props.columns},n,t.baseProps)),o.a.createElement(H.PaginationListStandalone,a))}))))}}var W=a(221);class q extends o.a.Component{constructor(e){super(e),this.state={show:!1,title:"",text:""}}componentWillReceiveProps(e){this.setState({show:e.show,title:e.title,text:e.text})}render(){return o.a.createElement(W.a,{show:this.state.show,centered:!0,onHide:()=>this.props.onCancel()},o.a.createElement(W.a.Header,{closeButton:!0},o.a.createElement(W.a.Title,null,this.state.title)),o.a.createElement(W.a.Body,null,o.a.createElement("p",null,this.state.text)),o.a.createElement(W.a.Footer,null,o.a.createElement(h.a,{variant:"secondary",onClick:()=>this.props.onCancel()},"Cancelar"),o.a.createElement(h.a,{variant:"primary",onClick:()=>this.props.onConfirm()},"Confirmar")))}}a(207);class Q extends o.a.Component{constructor(e){super(e),this.state={show:!1}}componentDidUpdate(e){this.props.show!==e.show&&this.setState({show:!0},this.hideMessage())}hideMessage(){setTimeout(()=>{this.setState({show:!1})},this.props.duration)}onExited(){Object(p.isUndefined)(this.props.onExited)||Object(p.isNull)(this.props.onExited)||this.props.onExited()}render(){return o.a.createElement(W.a,{id:"message-prompt",centered:!0,show:this.state.show,onExited:()=>this.onExited()},o.a.createElement(W.a.Body,null,this.props.text))}}const X=[{dataField:"_id",text:"Product ID",hidden:!0},{dataField:"nombre",text:"Nombre"},{dataField:"apellido_p",text:"Primer apellido"},{dataField:"apellido_m",text:"Segundo apellido"},{dataField:"telefono",text:"Tel\xe9fono"},{dataField:"mail",text:"Email"},{dataField:"direccion",text:"Direcci\xf3n"}];class Y extends o.a.Component{constructor(e){super(e),this.state={loading:!1,idEmpleado:null,confirmation:{title:"Eliminar empleado",text:"\xbfDeseas eliminar el empleado?",show:!1},message:{text:"",show:!1}},this.onClickEditButton=this.onClickEditButton.bind(this),this.onClickDeleteButton=this.onClickDeleteButton.bind(this),this.onCancel=this.onCancel.bind(this),this.onConfirm=this.onConfirm.bind(this)}componentDidMount(){}onClickEditButton(e){this.props.setIdEmpleado(e._id),this.props.changeTab("editar")}onClickDeleteButton(e){this.setState({idEmpleado:e._id,confirmation:{...this.state.confirmation,show:!0}})}onCancel(){this.setState({confirmation:{...this.state.confirmation,show:!1}})}onConfirm(){this.setState({confirmation:{...this.state.confirmation,show:!1}},this.eliminarEmpleado())}eliminarEmpleado(){this.setState({loading:!0}),v("/empleados/".concat(this.state.idEmpleado)).then(e=>{this.setState({loading:!1,message:{text:e.data.msg,show:!0}}),e.data.exito&&window.location.reload()}).catch(e=>{console.error(e),this.setState({loading:!1})})}reloadPage(){setTimeout(()=>{window.location.reload()},2500)}render(){return o.a.createElement(i.a,{id:"empleados-buscar-container"},o.a.createElement(q,{show:this.state.confirmation.show,title:this.state.confirmation.title,text:this.state.confirmation.text,onCancel:this.onCancel,onConfirm:this.onConfirm}),o.a.createElement(Q,{text:this.state.message.text,show:this.state.message.show,duration:2500,onExited:this.onExitedMessage}),o.a.createElement(I,{show:this.state.Loading}),o.a.createElement(c.a,null,o.a.createElement("h1",{style:{marginTop:"20px"}},"Buscar Empleados")),o.a.createElement(c.a,null,o.a.createElement(R,{url:"/empleados",columns:X,showEditButton:!0,showDeleteButton:!0,onClickEditButton:this.onClickEditButton,onClickDeleteButton:this.onClickDeleteButton})))}}class Z extends o.a.Component{constructor(e){super(e),this.state={redirect:!1,message:{text:"",show:!1},loading:!1,empleado:{nombre:"",apellido_p:"",apellido_m:"",telefono:"",mail:"",direccion:""}},this.onExitedMessage=this.onExitedMessage.bind(this)}setValue(e,t){this.setState({empleado:{...this.state.empleado,[e]:t}})}guardarEmpleados(){this.setState({loading:!0}),w("/empleados",this.state.empleado).then(e=>{e.data.exito&&this.setState({redirect:e.data.exito,message:{text:e.data.msg,show:!0}}),this.setState({loading:!1})}).catch(e=>{console.error(e),this.setState({loading:!0})})}onExitedMessage(){this.state.redirect&&this.props.changeTab("buscar")}render(){return o.a.createElement(i.a,{id:"empleados-crear-container"},o.a.createElement(Q,{text:this.state.message.text,show:this.state.message.show,duration:2500,onExited:this.onExitedMessage}),o.a.createElement(I,{show:this.state.loading}),o.a.createElement(c.a,null,o.a.createElement("h1",null,"Crear empleados")),o.a.createElement(c.a,null,o.a.createElement(d.a,null,o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Nombre"),o.a.createElement(d.a.Control,{onChange:e=>this.setValue("nombre",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Primer apellido"),o.a.createElement(d.a.Control,{onChange:e=>this.setValue("apellido_p",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Segundo apellido"),o.a.createElement(d.a.Control,{onChange:e=>this.setValue("apellido_m",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Tel\xe9fono"),o.a.createElement(d.a.Control,{onChange:e=>this.setValue("telefono",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Correo electr\xf3nico"),o.a.createElement(d.a.Control,{onChange:e=>this.setValue("mail",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Direcci\xf3n"),o.a.createElement(d.a.Control,{onChange:e=>this.setValue("direccion",e.target.value)})),o.a.createElement(h.a,{variant:"primary",onClick:()=>console.log(this.guardarEmpleados())},"Guardar Empleado"))))}}a(208);class $ extends o.a.Component{constructor(e){super(e),this.state={idEmpleado:this.props.getIdEmpleado(),redirect:!1,message:{text:"",show:!1},confirmation:{title:"Modificar empleado",text:"\xbfDeseas modificar el empleado?",show:!1},loading:!1,empleado:{nombre:"",apellido_p:"",apellido_m:"",telefono:"",mail:"",direccion:""}},this.onExitedMessage=this.onExitedMessage.bind(this),this.onCancel=this.onCancel.bind(this),this.onConfirm=this.onConfirm.bind(this)}componentDidMount(){this.getEmpleado()}getEmpleado(){this.setState({loading:!0}),x("/empleados/".concat(this.state.idEmpleado)).then(e=>{console.log(e),this.setState({empleado:e.data,loading:!1})}).catch(e=>{console.error(e),this.setState({loading:!1})})}setValue(e,t){this.setState({empleado:{...this.state.empleado,[e]:t}})}guardarEmpleados(){this.setState({loading:!0}),S("/empleados/".concat(this.state.idEmpleado),this.state.empleado).then(e=>{e.data.exito&&this.setState({redirect:e.data.exito,message:{text:e.data.msg,show:!0}}),this.setState({loading:!1})}).catch(e=>{console.error(e),this.setState({loading:!0})})}onExitedMessage(){this.state.redirect&&this.props.changeTab("buscar")}onCancel(){this.setState({confirmation:{...this.state.confirmation,show:!1}})}onConfirm(){this.setState({confirmation:{...this.state.confirmation,show:!1}},this.guardarEmpleados())}render(){return o.a.createElement(i.a,{id:"empleados-crear-container"},o.a.createElement(Q,{text:this.state.message.text,show:this.state.message.show,duration:2500,onExited:this.onExitedMessage}),o.a.createElement(q,{show:this.state.confirmation.show,title:this.state.confirmation.title,text:this.state.confirmation.text,onCancel:this.onCancel,onConfirm:this.onConfirm}),o.a.createElement(I,{show:this.state.loading}),o.a.createElement(c.a,null,o.a.createElement("h1",null,"Editar empleados")),o.a.createElement(c.a,null,o.a.createElement(d.a,null,o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Nombre"),o.a.createElement(d.a.Control,{value:this.state.empleado.nombre,onChange:e=>this.setValue("nombre",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Primer apellido"),o.a.createElement(d.a.Control,{value:this.state.empleado.apellido_p,onChange:e=>this.setValue("apellido_p",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Segundo apellido"),o.a.createElement(d.a.Control,{value:this.state.empleado.apellido_m,onChange:e=>this.setValue("apellido_m",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Tel\xe9fono"),o.a.createElement(d.a.Control,{value:this.state.empleado.telefono,onChange:e=>this.setValue("telefono",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Correo electr\xf3nico"),o.a.createElement(d.a.Control,{value:this.state.empleado.mail,onChange:e=>this.setValue("mail",e.target.value)})),o.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBasic"},o.a.createElement(d.a.Label,null,"Direcci\xf3n"),o.a.createElement(d.a.Control,{value:this.state.empleado.direccion,onChange:e=>this.setValue("direccion",e.target.value)})),o.a.createElement(h.a,{variant:"primary",onClick:()=>this.setState({confirmation:{...this.state.confirmation,show:!0}})},"Guardar Empleado"))))}}class ee extends o.a.Component{constructor(e){super(e),this.state={currenTab:"buscar",_id:null},this.changeTab=this.changeTab.bind(this),this.setIdEmpleado=this.setIdEmpleado.bind(this),this.getIdEmpleado=this.getIdEmpleado.bind(this)}changeTab(e){this.setState({currenTab:e})}setIdEmpleado(e){this.setState({_id:e})}getIdEmpleado(){return this.state._id}render(){return o.a.createElement(i.a,{id:"empleados-container"},o.a.createElement(c.a,null,o.a.createElement(P.a,{fill:!0,variant:"tabs",defaultActiveKey:"buscar",onSelect:e=>this.setState({currenTab:e})},o.a.createElement(P.a.Item,null,o.a.createElement(P.a.Link,{eventKey:"buscar"},"Buscar")),o.a.createElement(P.a.Item,null,o.a.createElement(P.a.Link,{eventKey:"crear"},"Crear")))),o.a.createElement(c.a,null,"buscar"===this.state.currenTab?o.a.createElement(Y,{changeTab:this.changeTab,setIdEmpleado:this.setIdEmpleado}):"crear"===this.state.currenTab?o.a.createElement(Z,{changeTab:this.changeTab}):o.a.createElement($,{changeTab:this.changeTab,getIdEmpleado:this.getIdEmpleado})))}}function te(){return o.a.createElement(M.a,null,o.a.createElement(O.d,null,o.a.createElement(O.b,{exact:!0,path:["/","/login"],component:k}),o.a.createElement(V,{exact:!0,path:"/empleados",component:ee}),o.a.createElement(O.b,{path:"*",component:()=>o.a.createElement("h1",{style:{marginTop:300}},"400",o.a.createElement("br",null),"P\xe1gina no encontrada manito")})))}var ae=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(G,null),o.a.createElement(te,null))};var ne=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,222)).then(t=>{let{getCLS:a,getFID:n,getFCP:o,getLCP:s,getTTFB:l}=t;a(e),n(e),o(e),s(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ae,null))),ne()},37:function(e){e.exports=JSON.parse('{"APIHOST":"https://movierentail.onrender.com"}')}},[[120,1,2]]]);
//# sourceMappingURL=main.2f979943.chunk.js.map